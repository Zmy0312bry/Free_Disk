# ç™½å«–æ€ªç½‘ç›˜

<div align="center">
  <img src="./readme_picture/2.png" alt="ç™½å«–æ€ªç½‘ç›˜ç•Œé¢å±•ç¤º" width="600px" />
  <p>åŸºäº Git çš„è½»é‡é«˜æ•ˆç½‘ç›˜è§£å†³æ–¹æ¡ˆ</p>
</div>

## ğŸ“ é¡¹ç›®ä»‹ç»

ç™½å«–æ€ªç½‘ç›˜æ˜¯ä¸€ä¸ªåŸºäº `Node.js` å’Œ `Git` æŠ€æœ¯æ ˆå¼€å‘çš„å¼€æºç½‘ç›˜ç³»ç»Ÿåç«¯ï¼Œä¸“ä¸ºä¸ªäººå’Œå°å›¢é˜Ÿè®¾è®¡ã€‚é¡¹ç›®æ•´åˆäº† Git çš„ç‰ˆæœ¬æ§åˆ¶èƒ½åŠ›ä¸ç°ä»£ç½‘ç›˜ç³»ç»Ÿçš„æ˜“ç”¨æ€§ï¼Œæä¾›äº†ä¸€å¥—å®Œæ•´çš„æ–‡ä»¶å­˜å‚¨ä¸ç®¡ç†è§£å†³æ–¹æ¡ˆã€‚

**æ ¸å¿ƒç‰¹è‰²**ï¼š
- åˆ©ç”¨ Git çš„**ç‰ˆæœ¬æ§åˆ¶**ç³»ç»Ÿå®ç°æ–‡ä»¶å†å²è¿½è¸ª
- é€šè¿‡**ç¨€ç–æ£€å‡º**æŠ€æœ¯ä¼˜åŒ–å¤§å‹ä»“åº“è®¿é—®é€Ÿåº¦
- æ”¯æŒ **Git LFS** å­˜å‚¨å¤§æ–‡ä»¶
- æä¾›æ ‡å‡† **RESTful API** æ¥å£ï¼Œæ”¯æŒä¸å¤šç§å‰ç«¯æ¡†æ¶é›†æˆ

ğŸ‘‰ [ç™½å«–æ€ªç½‘ç›˜å‰ç«¯é¡¹ç›®](https://github.com/Zmy0312bry/Free_disk_front)
## âœ¨ é¡¹ç›®ä¼˜åŠ¿

### ğŸš€ é«˜æ€§èƒ½è®¾è®¡
- **ç¨€ç–æ£€å‡ºä¼˜åŒ–**ï¼šé€‰æ‹©æ€§æ‹‰å–éœ€è¦çš„æ–‡ä»¶ï¼Œæ˜¾è‘—é™ä½ç½‘ç»œä¼ è¾“é‡
- **å¢é‡åŒæ­¥æœºåˆ¶**ï¼šä»…åŒæ­¥ä¿®æ”¹çš„æ–‡ä»¶ï¼Œæå‡ä¼ è¾“æ•ˆç‡
- **å¹¶å‘å¤„ç†èƒ½åŠ›**ï¼šæ”¯æŒå¤šç”¨æˆ·åŒæ—¶æ“ä½œï¼Œæ€§èƒ½ç¨³å®šå¯é 

### ğŸ›¡ï¸ å®‰å…¨å¯é 
- **ç‰ˆæœ¬æ§åˆ¶**ï¼šåŸºäº Git çš„ç‰ˆæœ¬æ§åˆ¶èƒ½åŠ›ï¼Œæ”¯æŒæ–‡ä»¶å†å²è¿½è¸ªä¸å›æ»š
- **SSHå¯†é’¥è®¤è¯**ï¼šé‡‡ç”¨å®‰å…¨çš„ SSH å¯†é’¥æœºåˆ¶è¿›è¡Œèº«ä»½éªŒè¯
- **æ•°æ®ä¸€è‡´æ€§**ï¼šç¡®ä¿æ–‡ä»¶ä¼ è¾“å’Œå­˜å‚¨çš„å®Œæ•´æ€§

### ğŸ’¡ æ™ºèƒ½ç‰¹æ€§
- **LFSå¤§æ–‡ä»¶æ”¯æŒ**ï¼šé’ˆå¯¹å¤§æ–‡ä»¶ä¼˜åŒ–çš„å­˜å‚¨å’Œä¼ è¾“æ–¹æ¡ˆ
- **è‡ªåŠ¨åŒ–é…ç½®**ï¼šæä¾›ä¸€é”®é…ç½®åŠŸèƒ½ï¼Œé™ä½ä½¿ç”¨é—¨æ§›
- **çŠ¶æ€ç›‘æ§**ï¼šå®æ—¶ç›‘æ§ç³»ç»Ÿè¿è¡ŒçŠ¶æ€ï¼Œæä¾›è¯¦ç»†æ—¥å¿—

### ğŸ”§ æ‰©å±•æ€§å¼º
- **æ¨¡å—åŒ–è®¾è®¡**ï¼šæ¸…æ™°çš„ä»£ç ç»“æ„ï¼Œä¾¿äºåŠŸèƒ½æ‰©å±•
- **RESTful API**ï¼šæ ‡å‡†åŒ–çš„æ¥å£è®¾è®¡ï¼Œæ”¯æŒå¤šç«¯æ¥å…¥
- **é…ç½®çµæ´»**ï¼šæ”¯æŒè‡ªå®šä¹‰é…ç½®ï¼Œé€‚åº”ä¸åŒåœºæ™¯éœ€æ±‚

## ğŸ® åŠŸèƒ½ç‰¹æ€§

- ğŸ—‚ï¸ **æ–‡ä»¶ç®¡ç†**
  - æ–‡ä»¶å¤¹åˆ›å»ºå’Œç®¡ç†
  - æ–‡ä»¶ä¸Šä¼ å’Œä¸‹è½½
  - æ–‡ä»¶ç‰ˆæœ¬æ§åˆ¶
  
- ğŸ”§ **Git é›†æˆ**
  - ç¨€ç–æ£€å‡ºæ”¯æŒ
  - Git LFS æ”¯æŒ
  - å®‰å…¨çš„æ¨é€æœºåˆ¶
  
- ğŸ” **SSH å¯†é’¥ç®¡ç†**
  - SSH å¯†é’¥ç”Ÿæˆ
  - å…¬é’¥è·å–
  
- âš™ï¸ **ç³»ç»Ÿé…ç½®**
  - ä»“åº“è·¯å¾„é…ç½®
  - è¿œç¨‹ä»“åº“é…ç½®
  - ç”¨æˆ·ä¿¡æ¯é…ç½®
  - ä¸‹è½½è·¯å¾„é…ç½®

## ğŸ“‹ å¾…åŠäº‹é¡¹

1. æ”¯æŒæœåŠ¡ç«¯è‡ªå®šä¹‰éƒ¨ç½²
2. æ”¯æŒæ›´å¤šç½‘ç›˜åŠŸèƒ½ï¼ˆå¦‚åœ¨çº¿é¢„è§ˆã€åä½œç¼–è¾‘ï¼‰
3. å®Œå–„ UI ä»¥åŠç¼ºå¤±ç•Œé¢ï¼Œé‡æ„ç”Ÿå‘½å‘¨æœŸé€»è¾‘ä»¥æ”¯æŒæ›´å¿«çš„ Git å‘½ä»¤

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç³»ç»Ÿè¦æ±‚

- Node.js >= 14
- Git >= 2.25.0
- Git LFSï¼ˆå¯é€‰ï¼Œç”¨äºå¤§æ–‡ä»¶å­˜å‚¨ï¼‰

### å®‰è£…æ­¥éª¤

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/yourusername/Free_Disk.git

# è¿›å…¥é¡¹ç›®ç›®å½•
cd Free_Disk

# å®‰è£…ä¾èµ–
npm install
```

### é¡¹ç›®é…ç½®

é¡¹ç›®é¦–æ¬¡è¿è¡Œå‰éœ€è¦è¿›è¡ŒåŸºç¡€é…ç½®ï¼š

1. é…ç½®ä»“åº“è·¯å¾„
2. é…ç½®è¿œç¨‹ä»“åº“åœ°å€
3. é…ç½® Git ç”¨æˆ·ä¿¡æ¯
4. é…ç½®ä¸‹è½½è·¯å¾„

è¿™äº›é…ç½®å¯ä»¥é€šè¿‡è°ƒç”¨ç›¸åº”çš„ API æ¥å£æ¥å®Œæˆã€‚

### å¯åŠ¨æœåŠ¡

```bash
# å¼€å‘ç¯å¢ƒè¿è¡Œï¼ˆæ”¯æŒçƒ­é‡è½½ï¼‰
npm run dev

# ç”Ÿäº§ç¯å¢ƒè¿è¡Œ
npm start
```

æœåŠ¡å°†åœ¨ http://127.0.0.1:3001 å¯åŠ¨

### è°ƒè¯•æŒ‡å—

é¡¹ç›®æä¾›äº† `Reqable` è°ƒè¯•æ¥å£é›†åˆï¼Œå¯ç›´æ¥å¯¼å…¥è°ƒè¯•ï¼š

- æ¥å£é›†åˆæ–‡ä»¶ï¼š**Free-disk.reqable_collection.json**
- [Reqable ä¸‹è½½é“¾æ¥](https://reqable.com/zh-CN/)

> ğŸ’¡ **æç¤º**ï¼šå¼ºçƒˆæ¨èä½¿ç”¨ `Reqable` è¿›è¡Œåç«¯ API è°ƒè¯•ï¼

## ğŸ“˜ API æ–‡æ¡£

### æ–‡ä»¶ç®¡ç†æ¥å£

#### åˆ›å»ºæ–‡ä»¶å¤¹
- **POST** `/api/file/folder`
- **åŠŸèƒ½**ï¼šåœ¨æŒ‡å®šç›®å½•ä¸‹åˆ›å»ºæ–°æ–‡ä»¶å¤¹
- **å‚æ•°**ï¼š
  ```json
  {
    "baseDir": "string",  // åŸºç¡€ç›®å½•è·¯å¾„ï¼ˆå¯é€‰ï¼‰
    "folderName": "string"  // è¦åˆ›å»ºçš„æ–‡ä»¶å¤¹åç§°ï¼ˆå¿…éœ€ï¼‰
  }
  ```
- **è¿”å›ç¤ºä¾‹**ï¼š
  ```json
  {
    "success": true,
    "path": "/path/to/new/folder"
  }
  ```

#### å¤åˆ¶æ–‡ä»¶åˆ°å®‰è£…ç›®å½•
- **POST** `/api/file/copy-to-install`
- **åŠŸèƒ½**ï¼šå°†æ–‡ä»¶ä»ä»“åº“å¤åˆ¶åˆ°å®‰è£…ç›®å½•
- **å‚æ•°**ï¼š
  ```json
  {
    "sourcePath": "string"  // æºæ–‡ä»¶è·¯å¾„ï¼ˆå¿…éœ€ï¼‰
  }
  ```
- **è¿”å›ç¤ºä¾‹**ï¼š
  ```json
  {
    "success": true,
    "message": "æ–‡ä»¶å¤åˆ¶å®Œæˆ",
    "sourcePath": "/source/path/file.txt",
    "targetPath": "/install/path/file.txt"
  }
  ```

### Git ç›¸å…³æ¥å£

#### è·å–å·¥ä½œç©ºé—´ä¿¡æ¯
- **GET** `/api/git/workspace-info`
- **åŠŸèƒ½**ï¼šè·å– Git å·¥ä½œç©ºé—´çš„å½“å‰çŠ¶æ€
- **è¿”å›ç¤ºä¾‹**ï¼š
  ```json
  {
    "status": "clean",
    "branch": "main",
    "remote": "origin"
  }
  ```

#### ç¨€ç–æ£€å‡ºæ›´æ–°
- **POST** `/api/git/sparse-pull`
- **åŠŸèƒ½**ï¼šæ‰§è¡Œç¨€ç–æ£€å‡ºçš„æ›´æ–°æ“ä½œ
- **å‚æ•°**ï¼š
  ```json
  {
    "paths": ["path1", "path2"]  // éœ€è¦æ£€å‡ºçš„è·¯å¾„åˆ—è¡¨
  }
  ```

#### æ–‡ä»¶ä¸Šä¼ å¹¶æ¨é€
- **POST** `/api/git/upload-and-push`
- **åŠŸèƒ½**ï¼šä¸Šä¼ æ–‡ä»¶å¹¶å°†å…¶æ¨é€åˆ° Git ä»“åº“
- **å‚æ•°**ï¼š
  - `file`ï¼šæ–‡ä»¶ï¼ˆmultipart/form-dataï¼‰
  - `path`ï¼šç›®æ ‡è·¯å¾„
- **é™åˆ¶**ï¼šæ–‡ä»¶å¤§å°é™åˆ¶ä¸º 50MB

#### Git LFS åˆå§‹åŒ–
- **POST** `/api/git/lfs-update`
- **åŠŸèƒ½**ï¼šåˆå§‹åŒ–æˆ–æ›´æ–° Git LFS é…ç½®

### SSH ç®¡ç†æ¥å£

#### ç”Ÿæˆ SSH å¯†é’¥
- **POST** `/api/ssh/generate-key`
- **åŠŸèƒ½**ï¼šç”Ÿæˆæ–°çš„ SSH å¯†é’¥å¯¹

#### è·å– SSH å…¬é’¥
- **GET** `/api/ssh/get-key`
- **åŠŸèƒ½**ï¼šè·å–å½“å‰çš„ SSH å…¬é’¥

### åˆå§‹åŒ–é…ç½®æ¥å£

#### è·å–é…ç½®ä¿¡æ¯
- **GET** `/api/init/config`
- **åŠŸèƒ½**ï¼šè·å–å½“å‰ç³»ç»Ÿé…ç½®

#### æ›´æ–°ä»“åº“è·¯å¾„
- **POST** `/api/init/config/repo-path`
- **å‚æ•°**ï¼š
  ```json
  {
    "repoPath": "string"  // æ–°çš„ä»“åº“è·¯å¾„
  }
  ```

#### æ›´æ–°è¿œç¨‹ä»“åº“åœ°å€
- **POST** `/api/init/config/remote-url`
- **å‚æ•°**ï¼š
  ```json
  {
    "remoteUrl": "string"  // æ–°çš„è¿œç¨‹ä»“åº“åœ°å€
  }
  ```

#### æ›´æ–°ç”¨æˆ·é…ç½®
- **POST** `/api/init/config/user`
- **å‚æ•°**ï¼š
  ```json
  {
    "name": "string",  // Git ç”¨æˆ·å
    "email": "string"  // Git é‚®ç®±
  }
  ```

#### åˆå§‹åŒ–ä¸‹è½½è·¯å¾„
- **POST** `/api/init/config/init-install-path`
- **å‚æ•°**ï¼š
  ```json
  {
    "installPath": "string"  // ä¸‹è½½ç›®å½•è·¯å¾„
  }
  ```

## ğŸ”„ é”™è¯¯å¤„ç†

æ‰€æœ‰æ¥å£åœ¨å‘ç”Ÿé”™è¯¯æ—¶ä¼šè¿”å›ç»Ÿä¸€æ ¼å¼çš„é”™è¯¯å“åº”ï¼š

```json
{
  "success": false,
  "error": "é”™è¯¯æè¿°ä¿¡æ¯"
}
```

åœ¨å¼€å‘ç¯å¢ƒä¸­ï¼Œé”™è¯¯å“åº”å¯èƒ½ä¼šåŒ…å«é¢å¤–çš„é”™è¯¯å †æ ˆä¿¡æ¯ï¼š

```json
{
  "success": false,
  "message": "é”™è¯¯æè¿°ä¿¡æ¯",
  "error": "è¯¦ç»†é”™è¯¯å †æ ˆ"
}
```

## ğŸ“š é›†æˆç¤ºä¾‹ä¸æœ€ä½³å®è·µ

### ğŸ“¦ åˆå§‹åŒ–æµç¨‹ï¼ˆå…±4æ­¥ï¼‰

1. **åˆ›å»ºå¹¶é…ç½®ä»£ç ä»“åº“**
   ```http
   POST http://<<HOST>>/init/init-repo
   ```
   `#ä»“åº“åˆå§‹åŒ– #åŸºç¡€é…ç½®`

2. **è®¾ç½®è¿œç¨‹ä»“åº“åˆå§‹åŒ–æ‹‰å–**
   ```http
   POST http://<<HOST>>/init/init-pull
   ```
   `#è¿œç¨‹è¿æ¥ #è®¿é—®æ§åˆ¶`

3. **ç¨€ç–æ‹‰å–ä¼˜åŒ–**
   ```http
   POST http://<<HOST>>/git/sparse-init-empty
   ```
   `#æ€§èƒ½ä¼˜åŒ– #ç¨€ç–æ‹‰å–èŠ‚çœç©ºé—´`

4. **é…ç½® Git LFS**
   ```http
   POST http://<<HOST>>/git/lfs-update
   ```
   `#èµ„æºç®¡ç† #ç‰ˆæœ¬æ§åˆ¶`

### ğŸ“¤ æ–‡ä»¶ä¸Šä¼ æµç¨‹ï¼ˆå…±3æ­¥ï¼‰

1. **åˆ›å»ºç›®å½•ç»“æ„**
   ```http
   POST http://<<HOST>>/file/folder
   ```
   `#è·¯å¾„ç®¡ç† #æ–‡ä»¶å¤¹æ“ä½œ`

2. **æ–‡ä»¶ä¸Šä¼ **
   ```http
   POST http://<<HOST>>/git/upload-and-push
   ```
   `#æ•°æ®ä¼ è¾“ #å†…å®¹å­˜å‚¨`

3. **æ¨é€åˆ°è¿œç¨‹**
   ```http
   POST http://<<HOST>>/git/safe-push
   ```
   `#ç‰ˆæœ¬åŒæ­¥ #ä»£ç æäº¤`

### ğŸ“¥ æ–‡ä»¶ä¸‹è½½æµç¨‹ï¼ˆå…±2æ­¥ï¼‰

1. **è®¾ç½®æ–‡ä»¶ä¿å­˜è·¯å¾„**
   ```http
   POST http://<<HOST>>/init/config/init-install-path
   ```
   `#è·¯å¾„é…ç½® #ä¸‹è½½å‡†å¤‡`

2. **æ‰§è¡Œæ–‡ä»¶å¤åˆ¶ä¸‹è½½**
   ```http
   POST http://<<HOST>>/file/copy-to-install
   ```
   `#å†…å®¹è·å– #æ–‡ä»¶ä¼ è¾“`

### ğŸ”‘ é…ç½®ç®¡ç†ï¼ˆå…±4æ­¥ï¼‰

1. **ç”Ÿæˆ SSH å¯†é’¥**
   ```http
   POST http://<<HOST>>/ssh/generate-key
   ```
   `#å®‰å…¨è®¤è¯ #å¯†é’¥ç®¡ç†`

2. **è·å– SSH å…¬é’¥**
   ```http
   GET http://<<HOST>>/ssh/get-key
   ```
   `#ä¿¡æ¯æŸ¥è¯¢ #çŠ¶æ€ç›‘æ§`

3. **æ›´æ–°è¿œç¨‹ä»“åº“ URL**
   ```http
   POST http://<<HOST>>/init/config/remote-url
   ```
   `#é…ç½®æ›´æ–° #åŠ¨æ€è°ƒæ•´`

4. **è·å–é…ç½®ä¿¡æ¯**
   ```http
   GET http://<<HOST>>/init/config
   ```
   `#çŠ¶æ€æŸ¥çœ‹ #é…ç½®å®¡è®¡`

### âœ¨ å…¶ä»–å®ç”¨æ¥å£

- **è·å–æ–‡ä»¶æ ‘**
   ```http
   GET http://<<HOST>>/git-tree
   ```
   `#ä¾¿äºè§£æ #è·å–JSONæ ¼å¼`

- **ç¨€ç–æ£€å‡ºæ“ä½œ**ï¼ˆéœ€è¦æŒ‰é¡ºåºè°ƒç”¨ï¼‰
   ```http
   POST http://<<HOST>>/git/sparse-update
   POST http://<<HOST>>/git/sparse-pull
   ```

> ğŸ’¡ **æœ€ä½³å®è·µ**ï¼šæŒ‰ç…§åˆå§‹åŒ– â†’ ä¸Šä¼ /ä¸‹è½½ â†’ é…ç½®ç®¡ç†çš„é¡ºåºè°ƒç”¨æ¥å£ï¼Œå„æµç¨‹é—´å»ºè®®é—´éš”5ç§’ä»¥ä¸Šç¡®ä¿çŠ¶æ€åŒæ­¥

## ğŸ“š å‚è€ƒèµ„æ–™

1. [Git ç¨€ç–æ£€å‡ºå®˜æ–¹æ–‡æ¡£](https://git-scm.cn/docs/git-sparse-checkout#Documentation/git-sparse-checkout.txt-codegitsparse-checkoutsetMYDIR1SUBDIR2code)
2. [Git LFS å®˜æ–¹ç½‘ç«™](https://git-lfs.com/) - Git Large File Storage æ˜¯ä¸€ä¸ªç”¨äºç‰ˆæœ¬æ§åˆ¶å¤§æ–‡ä»¶çš„å¼€æº Git æ‰©å±•
3. [simple-git NPM åŒ…](https://www.npmjs.com/package/simple-git) - Node.js ä¸­ä½¿ç”¨ Git çš„å·¥å…·åº“

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯

## ğŸ¤ è´¡çŒ®

æ¬¢è¿è´¡çŒ®ä»£ç æˆ–æå‡ºå»ºè®®ï¼Œè¯·é€šè¿‡ GitHub Issues æˆ– Pull Requests å‚ä¸é¡¹ç›®ã€‚

---

ğŸ”— **ç›¸å…³é“¾æ¥**ï¼š[ç™½å«–æ€ªç½‘ç›˜å‰ç«¯](https://github.com/Zmy0312bry/Free_disk_front)
